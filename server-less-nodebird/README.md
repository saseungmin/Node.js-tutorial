# ✔ 서버리스 노드 개발
## ✌ 서버리스 이해하기
- 서버를 클라우드 서비스가 대신 관리해줘서 개발자나 운영자가 서버를 관리하는 데 드는 부담이 줄어든다.
- 즉, 개발자는 자신의 서비스 로직 작성에만 집중할 수 있게 된다.
- 24시간 작동할 필요가 없는 서버인 경우, 서버리스 컴퓨팅을 사용하면 필요한 경우에만 실행되어 요금을 절약할 수도 있다.
- *AWS* 에서는 *Lambda*나 *API Gateway*, *S3* 등의 서비스가 있다.
- *GCP* 에서는 *App Engine*, *Firebase*, *Cloud Functions*, *Cloud Storage* 등의 서비스가 있다.
- *Lambda*와 *Cloud Functions*는 **특정한 동작을 수행한 로직을 저장하고, 요청이 들어올 때 로직을 실행하는 서비스**이다.
  - 함수처럼 호출할 때 실행되므로 FaaS(*Function as a Service*)라고 불린다.
  - 이미지 리사이징 같이 노드가 하기 버거운 작업을 함수로 만들어 클라우드에 올리고, 리사이징이 필요할 때마다 FaaS 서비스를 호출하면 된다.
- *S3*와 *Cloud Storage*는 **클라우드 데이터 저장소**라고 생각하면 된다.
  - 이미지 같은 데이터를 저장하고, 다른 사람에게 보여줄 수 있다.
  - 노드가 다른 서버에 비해 정적 파일 제공에 딱히 이점이 있지 않으므로 클라우드 데이터 저장소가 대신 정적 파일을 제공하도록 위임하기도 한다.

  ## ✌️ AWS S3 사용하기
  - AWS S3에 이미지를 업로드 한다.

  1. aws.amazon.com 에 로그인 후 서비스 - 스토리지 - S3 클릭
  2. 버킷 만들기 또는 시작하기 클릭
  3. 버킷 이름(고유하다)과 버킷 리전을 설정한다.
    - 리전은 현재 위치와 가까울수록 이미지 로딩 속도가 빨라진다. 
  4. 다음을 계속 누른 후 버킷 만들기 클릭
  - S3에서는 허용한 사용자만 버킷 안에 들어 있는 데이터를 가져갈 수 있다.
  - 따라서 웹 사이트에서 버킷의 이미지를 로드할 수 있도록 권한을 부여한다.
  5. 자신의 버킷을 클릭 후 권한 - 버킷 정책 메뉴를 선택한 뒤, 버킷 정책 편집기에 아래 코드를 적어준다. (JSON 형식으로 버킷 권한을 설정할 수 있다.)
  <pre>
  {
    "Version": "2012-10-17",
    "Statement": [
      {
        "Sid": "AddPerm",
        "Effect": "Allow",
        "Principal": "*",
        "Action": [
          "s3:GetObject",
          "s3:PutObject"
        ],
        "Resource": "arn:aws:s3:::seungminnode/*"
      }
    ]
  }
  </pre>